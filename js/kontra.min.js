/*
 * Kontra.js v2.1.0 (Custom Build on 2016-09-30) | MIT
 * Build: --files gameLoop,sprite,keyboard
 */
var kontra=function(t,i){"use strict";return t.init=function(e){if(t._isString(e))this.canvas=i.getElementById(e);else if(t._isCanvas(e))this.canvas=e;else if(this.canvas=i.getElementsByTagName("canvas")[0],!this.canvas){var n=new ReferenceError("No canvas element found.");return void t._logError(n,"You must provide a canvas element for the game.")}this.context=this.canvas.getContext("2d")},t._logError=function(t,i){console.error("Kontra: "+i+"\n\t"+t.stack)},t._noop=function(){},t._isString=function(t){return"string"==typeof t},t._isNumber=function(t){return"number"==typeof t},t._isImage=function(t){return t instanceof HTMLImageElement},t._isCanvas=function(t){return t instanceof HTMLCanvasElement},t}(kontra||{},document),kontra=function(t,i){"use strict";return t.timestamp=function(){return i.performance&&i.performance.now?function(){return i.performance.now()}:function(){return(new Date).getTime()}}(),t.gameLoop=function(i){var e=Object.create(t.gameLoop.prototype);return e.init(i),e},t.gameLoop.prototype={init:function(i){if(i=i||{},"function"!=typeof i.update||"function"!=typeof i.render){var e=new ReferenceError("Required functions not found");return void t._logError(e,"You must provide update() and render() functions to create a game loop.")}this.isStopped=!0,this._accumulator=0,this._delta=1e3/(i.fps||60),this._step=1/(i.fps||60),this.update=i.update,this.render=i.render,i.clearCanvas===!1&&(this._clearCanvas=t._noop)},start:function(){this._last=t.timestamp(),this.isStopped=!1,requestAnimationFrame(this._frame.bind(this))},stop:function(){this.isStopped=!0,cancelAnimationFrame(this._rAF)},_frame:function(){if(this._rAF=requestAnimationFrame(this._frame.bind(this)),this._now=t.timestamp(),this._dt=this._now-this._last,this._last=this._now,!(this._dt>1e3)){for(this._accumulator+=this._dt;this._accumulator>=this._delta;)this.update(this._step),this._accumulator-=this._delta;this._clearCanvas(),this.render()}},_clearCanvas:function(){t.context.clearRect(0,0,t.canvas.width,t.canvas.height)}},t}(kontra||{},window),kontra=function(t,i,e){"use strict";return t.vector=function(i){var e=Object.create(t.vector.prototype);return e.init(i),e},t.vector.prototype={init:function(t){return t=t||{},this.x=t.x||0,this.y=t.y||0,this},add:function(t,i){this.x+=(t.x||0)*(i||1),this.y+=(t.y||0)*(i||1)},clamp:function(t,n,o,r){this._xMin=t!==e?t:-(1/0),this._xMax=o!==e?o:1/0,this._yMin=n!==e?n:-(1/0),this._yMax=r!==e?r:1/0,this._x=this.x,this._y=this.y,Object.defineProperties(this,{x:{get:function(){return this._x},set:function(t){this._x=i.min(i.max(t,this._xMin),this._xMax)}},y:{get:function(){return this._y},set:function(t){this._y=i.min(i.max(t,this._yMin),this._yMax)}}})}},t.sprite=function(i){var e=Object.create(t.sprite.prototype);return e.init(i),e},t.sprite.prototype={init:function(i){i=i||{},this.position=(this.position||t.vector()).init({x:i.x,y:i.y}),this.velocity=(this.velocity||t.vector()).init({x:i.dx,y:i.dy}),this.acceleration=(this.acceleration||t.vector()).init({x:i.ddx,y:i.ddy});for(var e in i)i.hasOwnProperty(e)&&(this[e]=i[e]);this.timeToLive=i.timeToLive||0,this.context=i.context||t.context,t._isImage(i.image)||t._isCanvas(i.image)?(this.image=i.image,this.width=i.image.width,this.height=i.image.height,this.advance=this._advanceSprite,this.draw=this._drawImage):i.animations?(this.animations=i.animations,this.currentAnimation=i.animations[Object.keys(i.animations)[0]],this.width=this.currentAnimation.width,this.height=this.currentAnimation.height,this.advance=this._advanceAnimation,this.draw=this._drawAnimation):(this.color=i.color,this.width=i.width,this.height=i.height,this.advance=this._advanceSprite,this.draw=this._drawRect)},get x(){return this.position.x},get y(){return this.position.y},get dx(){return this.velocity.x},get dy(){return this.velocity.y},get ddx(){return this.acceleration.x},get ddy(){return this.acceleration.y},set x(t){this.position.x=t},set y(t){this.position.y=t},set dx(t){this.velocity.x=t},set dy(t){this.velocity.y=t},set ddx(t){this.acceleration.x=t},set ddy(t){this.acceleration.y=t},isAlive:function(){return this.timeToLive>0},collidesWith:function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},update:function(t){this.advance(t)},render:function(){this.draw()},playAnimation:function(t){this.currentAnimation=this.animations[t]},_advanceSprite:function(t){this.velocity.add(this.acceleration,t),this.position.add(this.velocity,t),this.timeToLive--},_advanceAnimation:function(t){this._advanceSprite(t),this.currentAnimation.update(t)},_drawRect:function(){this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.width,this.height)},_drawImage:function(){this.context.drawImage(this.image,this.x,this.y)},_drawAnimation:function(){this.currentAnimation.render({context:this.context,x:this.x,y:this.y})}},t}(kontra||{},Math),kontra=function(t,i){"use strict";function e(t){return"number"==typeof t.which?t.which:t.keyCode}function n(t){var i=[];t=t.trim().replace("++","+plus");for(var e,n=0;e=m[n];n++)t.indexOf(e)!==-1&&(i.push(e),t=t.replace(e,""));return t=t.replace(/\+/g,"").toLowerCase(),d[t]?i.push("shift+"+d[t]):t&&i.push(t),i.join("+")}function o(t){for(var i,n=[],o=0;i=m[o];o++)t[i+"Key"]&&n.push(i);var r=u[e(t)];return n.indexOf(r)===-1&&n.push(r),n.join("+")}function r(t){for(var i,e=o(t),n=0,r=e.split("+");i=r[n];n++)h[i]=!0;c[e]&&c[e](t,e)}function s(t){var i=u[e(t)];h[i]=!1,p[i]&&(h[p[i]]=!1)}function a(t){h={}}for(var c={},h={},u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"leftwindow",92:"rightwindow",93:"select",144:"numlock",145:"scrolllock",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},f=0;f<26;f++)u[65+f]=String.fromCharCode(65+f).toLowerCase();for(f=0;f<10;f++)u[48+f]=""+f;for(f=1;f<20;f++)u[111+f]="f"+f;for(f=0;f<10;f++)u[96+f]="numpad"+f;var d={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\",plus:"="},p={leftwindow:"meta",select:"meta"},m=["meta","ctrl","alt","shift"];return i.addEventListener("keydown",r),i.addEventListener("keyup",s),i.addEventListener("blur",a),t.keys={},t.keys.bind=function(i,e){if("function"!=typeof e){var o=new SyntaxError("Invalid function.");return void t._logError(o,"You must provide a function as the second parameter.")}i=Array.isArray(i)?i:[i];for(var r,s=0;r=i[s];s++){var a=n(r);c[a]=e}},t.keys.unbind=function(t){t=Array.isArray(t)?t:[t];for(var i,e=0;i=t[e];e++){var o=n(i);c[o]=void 0}},t.keys.pressed=function(t){var i=n(t),e=!0;t=i.split("+");for(var o,r=0;o=t[r];r++)e=e&&!!h[o];return e},t}(kontra||{},window);