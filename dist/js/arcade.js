window.game=function(e){function t(){M||(M=setTimeout(function(){M=null,s()},66))}function s(){var e=parseInt(getComputedStyle(kontra.canvas).width),t=parseInt(getComputedStyle(kontra.canvas).height);j.style.height=t+"px",b.style.top=kontra.canvas.getBoundingClientRect().top+t+"px";for(var s=0;s<g.length;s++)g[s].style.width=.30956*e+"px",g[s].style.height=.3029*t+"px",g[s].style.padding=.0119*e+"px"}function n(){var t=g[E].getAttribute("data-game");if(e[t])a(e[t]);else if(!document.querySelector('script[src="js/'+t+'.js"]')){var s=document.createElement("script");s.onload=function(){a(e[t])},s.src="js/games/"+t+".js",document.head.appendChild(s)}}function a(t){g[E].blur(),g[E].setAttribute("tabindex",-1),g[E].removeAttribute("aria-selected"),p.classList.add("hide"),e.loop.stop(),e.selectedGame=t,t.start(),kontra.canvas.setAttribute("tabindex",0),kontra.canvas.focus()}kontra.init();var r=kontra.canvas.width,c=kontra.canvas.height,o=5,d=3,i=3,u=(r-o*d*2)/d|0,l=(c-o*i*2)/i|0,v=kontra.keys.pressed,h=document.querySelector("#j"),f=document.querySelector("#f"),m=document.querySelector("#m"),g=document.querySelectorAll(".gb"),p=document.querySelector(".gbw"),b=document.querySelector(".c"),L=document.querySelector(".cw"),y=0,k=0,P=0,w=0,x=!1,A=!1,E=0,S=1;e.games=[],e.width=u,e.height=l;for(var q=0;q<g.length;q++)!function(e){g[e].addEventListener("click",function(){E=e,n()}),g[e].addEventListener("touchstart",function(){E=e,n()})}(q);document.addEventListener("touchstart",function(e){e.preventDefault()}),document.addEventListener("touchmove",function(e){e.preventDefault()}),document.addEventListener("touchend",function(e){e.preventDefault()}),L.addEventListener("touchstart",function(e){e.preventDefault(),x=!0;var t=e.changedTouches[0];y=parseInt(t.clientX),k=parseInt(t.clientY)}),L.addEventListener("touchmove",function(e){e.preventDefault(),x=!1;var t=e.changedTouches[0];w=parseInt(t.clientX)-y,P=parseInt(t.clientY)-k}),L.addEventListener("touchend",function(e){e.preventDefault(),x=!1,w=0,P=0,y=0,k=0}),f.addEventListener("touchstart",function(){x=!0}),f.addEventListener("touchend",function(){x=!1}),m.addEventListener("touchstart",function(){A=!0}),m.addEventListener("touchend",function(){A=!1}),window.addEventListener("resize",t,!1);var M,D=document.styleSheets[0],I=D.insertRule(".cw:before {}",D.cssRules.length),j=D.cssRules.item(I);return s(),e.triggerReset=function(){for(var t=0;t<e.games.length;t++)e.games[t].reset()},e.goBack=function(){e.loop.start(),g[E].setAttribute("tabindex",0),g[E].setAttribute("aria-selected",!0),p.classList.remove("hide"),g[E].focus(),kontra.canvas.removeAttribute("tabindex"),document.querySelector("#at").innerHTML=""},e.updateKeys=function(){e.enterPressed=v("space")||v("enter")||x,e.escPressed=v("esc")||A,e.upPressed=v("up")||v("w")||v("z")||k&&P<0&&Math.abs(P)>Math.abs(w),e.rightPressed=v("right")||v("d")||y&&w>0&&Math.abs(w)>Math.abs(P),e.downPressed=v("down")||v("s")||k&&P>0&&Math.abs(P)>Math.abs(w),e.leftPressed=v("left")||v("a")||v("q")||y&&w<0&&Math.abs(w)>Math.abs(P),e.upPressed?(h.classList.remove("d"),h.classList.add("u")):e.downPressed?(h.classList.remove("u"),h.classList.add("d")):h.classList.remove("u","d"),e.leftPressed?(h.classList.remove("r"),h.classList.add("l")):e.rightPressed?(h.classList.remove("l"),h.classList.add("r")):h.classList.remove("l","r"),e.enterPressed?(f.click(),f.classList.add("active")):f.classList.remove("active"),e.escPressed?(m.click(),m.classList.add("active")):m.classList.remove("active")},e.loop=kontra.gameLoop({update:function(t){e.updateKeys(),S+=t;for(var s=0;s<e.games.length;s++)e.games[s].update(t);S>.25?(e.rightPressed?(g[E].setAttribute("tabindex",-1),g[E].removeAttribute("aria-selected"),E=E==e.games.length-1?2:E+1):e.leftPressed&&(g[E].setAttribute("tabindex",-1),g[E].removeAttribute("aria-selected"),E=0==E?0:E-1),(e.rightPressed||e.leftPressed)&&(g[E].focus(),g[E].setAttribute("tabindex",0),g[E].setAttribute("aria-selected",!0),S=0),e.enterPressed&&(n(),S=0)):e.rightPressed||e.leftPressed||(S=1)},render:function(){for(var t=0;t<e.games.length;t++)kontra.context.save(),kontra.context.translate(o+o*t*2+u*t,o),e.games[t].render(),kontra.context.restore()},fps:30}),e.loop.start(),g[0].focus(),e}(window.game||{});